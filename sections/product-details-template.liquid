{% comment %}
** Product with additional details - custom view **
- Product template
- Uses blocks
{% endcomment %}

{% assign sidebar = false %}

<a name="pagecontent" id="pagecontent"></a>

<div class="container main content">
  <div class="sixteen columns">
    {% if collection.previous_product or collection.next_product or section.settings.product_breadcrumb %}
      <div class="clearfix breadcrumb-collection">
        {% if collection.previous_product or collection.next_product %}
          <div class="nav_arrows breadcrumb_text">
            {% if collection.previous_product %}
              <a href="{{ collection.previous_product }}" title="{{ 'products.general.previous_product_html' | t }}" class="breadcrumb_link"><span class="icon-left-arrow"> {{ 'products.general.previous_product_html' | t }}</span></a>
            {% endif %}
            {% if collection.previous_product and collection.next_product %}<span class="breadcrumb-divider"> | </span>{% endif %}

            {% if collection.next_product %}
              <a href="{{collection.next_product}}" title="{{ 'products.general.next_product_html' | t }}" class="breadcrumb_link">{{ 'products.general.next_product_html' | t }} <span class="icon-right-arrow"></span></a>
            {% endif %}
          </div>
        {% endif %}

        {% if section.settings.product_breadcrumb %}
          <div class="breadcrumb_text" itemscope itemtype="http://schema.org/BreadcrumbList">
            <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="{{ shop.url }}" title="{{ shop.name | escape }}" itemprop="item" class="breadcrumb_link"><span itemprop="name">{{ 'general.breadcrumbs.home' | t }}</span></a></span>
            <span class="breadcrumb-divider">/</span>
            <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
              {% if collection %}
                <a href="{{ collection.url }}" title="{{ collection.title | escape }}" itemprop="item" class="breadcrumb_link"><span itemprop="name">{{ collection.title }}</span></a>
              {% else %}
                <a href="/collections/all" title="{{ collections.all.title }}" class="breadcrumb_link"><span>{{ collections.all.title }}</span></a>
              {% endif %}
            </span>
            <span class="breadcrumb-divider">/</span>
            {{ product.title }}
          </div>
        {% endif %}
      </div>
    {% endif %}
  </div>

  {% comment %}Check to see if sidebar should be enabled{% endcomment %}
  {% assign sidebar = false %}

  <div class="product clearfix">
    <div class="sixteen columns">

      <div class="product-{{ product.id }}"
            data-free-text="{{ settings.free_price_text }}">
        <div class="section product_section clearfix js-product_section {% if section.settings.product_images_position == 'right' %}align_right--images{% endif %}" itemscope itemtype="http://schema.org/Product" data-rv-handle="{{ product.handle }}">

          <div class="nine columns {% if section.settings.product_images_position == 'left' %}alpha{% else %}omega{% endif %}">
            {% include 'product-images' %}
          </div>

          <div class="seven columns {% if section.settings.product_images_position == 'left' %}omega{% else %}alpha{% endif %}">

            {% assign collection_handles = product.collections | map: 'handle' %}
            {% assign variant = product.selected_or_first_available_variant %}

            {% if product.available %}
              {% if settings.sale_banner_enabled and product.compare_at_price_max > product.price %}
                <div class="sale_banner_product">{{ 'collections.general.sale' | t }}</div>
              {% endif %}
            {% endif %}
            {% if collection_handles contains 'new' %}
              <div class="new_banner_product">{{ 'collections.general.new' | t }}</div>
            {% endif %}
            {% if collection_handles contains 'pre-order' %}
              <div class="preorder_banner_product">{{ 'collections.general.pre_order' | t }}</div>
            {% endif %}

             {% if section.settings.display_vendor %}
              <p class="vendor">
                <span itemprop="brand" class="vendor">{{ product.vendor | link_to_vendor }}</span>
              </p>
            {% endif %}

            {% if variant.sku != blank and section.settings.display_sku %}
              <p class="sku">
                <span itemprop="sku">{{ variant.sku }}</span>
              </p>
            {% endif %}
            <h1 class="product_name" itemprop="name">{{ product.title }}</h1>
            {% if settings.enable_shopify_product_badges and settings.enable_shopify_review_comments %}
              <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
            {% endif %}
            <div class="feature_divider"></div>

            {% assign product_tags = product.tags | join: ' ' %}
            {% if product_tags contains 'meta-size-chart-' %}
              {% for tag in product.tags %}
                {% if tag contains 'meta-size-chart-' %}
                  <a href="#size-chart{{product.id}}" class="size_chart" data-remodal-target="size-chart{{product.id}}" data-no-instant>{{ 'products.product.size_chart' | t }} <span class="icon-right-arrow"></span></a>
                  {% include 'popup-size-chart', product_id: product.id %}
                {% endif %}
              {% endfor %}
            {% elsif settings.size_chart != blank %}
              <a href="#size-chart" class="size_chart" data-remodal-target="size-chart" data-no-instant>{{ 'products.product.size_chart' | t }} <span class="icon-right-arrow"></span></a>
            {% endif %}

            {% if collection_handles contains 'coming-soon' %}
              <p class="modal_price">{{ 'collections.general.coming_soon' | t }}</p>
            {% else %}
              <p class="modal_price" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
                <meta itemprop="priceCurrency" content="{{ shop.currency }}" />
                <meta itemprop="seller" content="{{ shop.name | escape }}" />
                <link itemprop="availability" href="http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}">
                <meta itemprop="itemCondition" content="New" />

                <span class="sold_out">{% if variant.available == false %}{{ 'products.product.sold_out' | t }}{% endif %}</span>
                <span itemprop="price" content="{{ variant.price | money_without_currency | remove: "," }}" class="{% if variant.compare_at_price > variant.price %}sale{% endif %}">
                  <span class="current_price {% if product.available == false %}hidden{% endif %}">
                    {% if variant.price > 0 %}
                      <span class="money">{{ variant.price | money }}</span>
                    {% else %}
                      {{ settings.free_price_text }}
                    {% endif %}
                  </span>
                </span>
                <span class="was_price">
                  {% if variant.price < variant.compare_at_price and variant.available %}
                    {{ variant.compare_at_price | money }}
                  {% endif %}
                </span>

                {% if section.settings.display_savings %}
                  <span class="sale savings">
                    {% if variant.price < variant.compare_at_price and variant.available %}
                      {{ 'products.product.savings' | t }}  {{ variant.compare_at_price | minus: variant.price | times: 100 | divided_by: variant.compare_at_price }}% (<span class="money">{{ variant.compare_at_price | minus: variant.price | money }}</span>)
                    {% endif %}
                  </span>
                {% endif %}
              </p>

              {% include 'product-notify-me' %}
            {% endif %}

            {% if section.settings.product_description_position == "top" %}
              {% if product.description != blank %}
               <div class="description" itemprop="description">
                 {{ product.description | split: '<!-- split -->' | first }}
               </div>
             {% endif %}
            {% endif %}

            {% unless collection_handles contains 'coming-soon' %}
              {% include 'product-form' with 'product' %}
            {% endunless %}

            {% if section.settings.product_description_position == "bottom" %}
              {% if product.description != blank %}
               <div class="description bottom" itemprop="description">
                {{ product.description | split: '<!-- split -->' | first }}
               </div>
              {% endif %}
            {% endif %}

            {% if settings.enable_shopify_review_comments and settings.review_position == "next_to_gallery" %}
              <div id="shopify-product-reviews" data-id="{{product.id}}">{{ product.metafields.spr.reviews }}</div>
            {% endif %}

            {% if section.settings.display_collections or section.settings.display_tags or section.settings.display_type %}
              <div class="product_links">
                {% if section.settings.display_collections %}
                  <p>
                    <span class="label">{{ 'products.product.collections' | t }}:</span>
                    <span>
                     {% for col in product.collections %}
                       <a href="{{ col.url }}" title="{{ col.title }}">{{ col.title }}</a>{% unless forloop.last %},{% endunless %}
                     {% endfor %}
                    </span>
                  </p>
                {% endif %}

                {% if section.settings.display_type %}
                  <p>
                    <span class="label">{{ 'products.product.product_types' | t }}:</span>
                    <span>{{ product.type | link_to_type }}</span>
                  </p>
                {% endif %}

                {% if section.settings.display_tags %}
                  <p>
                   {% for tag in product.tags %}
                     {% if forloop.first %}
                       <span class="label">{{ 'products.product.tags' | t }}:</span>
                     {% endif %}

                     {% unless tag contains 'meta-' %}
                       <span>
                         <a href="/collections/{% if collection %}{{ collection.handle }}{% else %}all{% endif %}/{{ tag | handle }}" title="{{ 'products.product.products_tagged' | t: tag: tag }}">{{ tag }}</a>{% unless forloop.last %},{% endunless %}
                         </span>
                     {% endunless %}
                   {% endfor %}
                  </p>
                {% endif %}
              </div>
            {% endif %}

            <div class="meta">
              {% if section.settings.display_social_buttons %}
                {% include "social-buttons" with "product" %}
              {% endif %}
            </div>
          </div>
        </div>

        {% if product.description contains "<!-- split -->"  %}
          <br class="clear" />
          <div class="section clearfix">
            <div class="description">
              {{ product.description | split: '<!-- split -->' | last }}
            </div>
          </div>
        {% endif %}
      </div>
      <div class="sixteen columns">
        {% if settings.enable_shopify_review_comments and settings.review_position == "below_gallery" %}
          <div class="shopify-reviews">
            <div id="shopify-product-reviews" data-id="{{product.id}}">{{ product.metafields.spr.reviews }}</div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

  {% if section.settings.related_products_position == "above" and section.settings.display_related_products %}
    {% include 'related-products' %}
  {% endif %}

  <div class="product-details__blocks clearfix">
    {% if section.blocks.size > 0 %}
      {% for block in section.blocks %}

        <div {{ block.shopify_attributes }} class="block__{{ block.type }}">

          <!-- Blog posts -->
          {% if block.type == "blog_posts" %}
            <div class="container">
              <div class="section clearfix homepage_content">
                {% if block.settings.title != blank %}
                  <div class="sixteen columns">
                    <h2 class="title center blog">
                      <a href="{{ blogs[block.settings.blog_widget_select].url }}">{{ block.settings.title | escape }}</a>
                    </h2>
                    <div class="feature_divider"></div>
                  </div>
                {% endif %}
                {% if block.settings.blog_widget_select != blank %}
                  {% for article in blogs[block.settings.blog_widget_select].articles limit: block.settings.home_page_articles %}
                    <div class="{% if block.settings.home_page_articles == 2 %}eight columns{% elsif block.settings.home_page_articles == 3 %}one-third column{% else %}four columns{% endif %} article">
                      {% if article.image %}
                        <a href="{{ article.url }}">
                          <img  src="{{ article.image | img_url: '100x' }}"
                                class="lazyload {{ settings.image_loading_style }}"
                                alt="{% if article.image.alt != blank %}{{ article.image.alt }}{% else %}{{ article.title | escape }}{% endif %}"
                                data-sizes="auto"
                                data-src="{{ article.image | img_url: '2048x' }}"
                                data-srcset=" {{ article.image | img_url: '200x' }} 200w,
                                              {{ article.image | img_url: '400x' }} 400w,
                                              {{ article.image | img_url: '600x' }} 600w,
                                              {{ article.image | img_url: '800x' }} 800w,
                                              {{ article.image | img_url: '1000x' }} 1000w,
                                              {{ article.image | img_url: '1400x' }} 1400w,
                                              {{ article.image | img_url: '2048x' }} 2048w"
                                />
                        </a>
                      {% endif %}

                      <h3 class="sub_title">
                        <a href="{{ article.url }}">{{ article.title }}</a>
                      </h3>
                      <p class="blog_meta">
                        {% if block.settings.blog_author %}
                          <span>{{ 'blogs.article.by_author' | t: author: article.author }}</span>
                        {% endif %}

                        {% if block.settings.blog_date %}
                          <span>{{ article.published_at | date: format: "month_day_year" }}</span>
                        {% endif %}

                        {% if block.settings.blog_comment_count %}
                          {% if settings.disqus_enabled %}
                            <span>
                              <a href="{{ article.url }}#disqus_thread" data-disqus-identifier="{{ article.id }}" class="disqus-comment-count">{{ 'blogs.counts.comments_with_count' | t: count: 0 }}</a>
                            </span>
                          {% elsif article.comments_enabled? and article.comments_count > 0 %}
                            <span>
                              <a href="{{ article.url }}#comments">{{ 'blogs.counts.comments_with_count' | t: count: article.comments_count }}</a>
                            </span>
                          {% endif %}
                        {% endif %}
                      </p>

                      {% if block.settings.blog_tags %}
                        <div class="blog_meta tags">
                          {% for tag in article.tags %}
                            <span><a href="{{ shop.url}}/blogs/{{ blogs[block.settings.blog_widget_select].handle }}/tagged/{{ tag | handleize }}" title="{{ blogs[block.settings.blog_widget_select].title | escape }} {{ 'blogs.general.tagged' | t }} {{ tag | escape }}">{{ tag }}</a></span>
                          {% endfor %}
                        </div>
                      {% endif %}

                      {% if article.excerpt != blank %}
                        <div class="excerpt">{{ article.excerpt }}</div>
                      {% endif %}
                      {% if block.settings.read_more_link %}
                        <a href="{{ article.url }}" {% if settings.read_more_style == 'button' %}class="action_button continue-button"{% endif %}>{{ 'blogs.general.continue_reading_html' | t }}</a>
                      {% endif %}
                    </div>
                  {% endfor %}
                {% else %}
                  {% for i in (1..block.settings.home_page_articles) %}
                    <div class="{% if block.settings.home_page_articles == 2 %}eight columns{% elsif block.settings.home_page_articles == 3 %}one-third column{% else %}four columns{% endif %} article">
                      {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}

                      <h3 class="sub_title">
                        <a href="#">{{ 'homepage.onboarding.blogpost_title' | t }}</a>
                      </h3>
                      <p class="blog_meta">
                        {% if block.settings.blog_author %}
                          <span>{{ 'homepage.onboarding.blog_author' | t: author: article.author }}</span>
                        {% endif %}

                        {% if block.settings.blog_date %}
                          <span>{{ 'now' | date: format: "month_day_year" }}</span>
                        {% endif %}

                        {% if block.settings.blog_comment_count %}
                          {% if settings.disqus_enabled %}
                            <span>
                              <a href="#" data-disqus-identifier="#" class="disqus-comment-count">{{ 'blogs.counts.comments_with_count' | t: count: 0 }}</a>
                            </span>
                          {% else %}
                            <span>
                              <a href="#">{{ 'blogs.counts.comments_with_count' | t: count: 5 }}</a>
                            </span>
                          {% endif %}
                        {% endif %}
                      </p>

                      {% if block.settings.blog_tags %}
                        <div class="blog_meta tags">
                          {% for tag in article.tags %}
                            <span><a href="{{ shop.url}}/blogs/{{ blogs[block.settings.blog_widget_select].handle }}/tagged/{{ tag | handleize }}" title="{{ blogs[block.settings.blog_widget_select].title | escape }} {{ 'blogs.general.tagged' | t }} {{ tag | escape }}">{{ tag }}</a></span>
                          {% endfor %}
                        </div>
                      {% endif %}

                      <div class="excerpt">{{ 'homepage.onboarding.blog_excerpt' | t }}</div>

                      {% if block.settings.read_more_link %}
                        <a href="{{ article.url }}" {% if settings.read_more_style == 'button' %}class="action_button continue-button"{% endif %}>{{ 'blogs.general.continue_reading_html' | t }}</a>
                      {% endif %}
                    </div>
                  {% endfor %}
                {% endif %}
              </div>
            </div>

          <!-- Contact form -->
          {% elsif block.type == "contact_form" %}
            <div class="container">
              {% if block.settings.title != blank %}
                <h2 class="title center">{{ block.settings.title }}</h2>
                <div class="feature_divider"></div>
              {% endif %}
              {% if block.settings.contact_text_position == "left" %}
                <div class="seven columns alpha {% if block.settings.contact_text_alignment == "center" %}center{% elsif block.settings.contact_text_alignment == "right" %}align_right{% endif %}">
                  {% if block.settings.contact_subheading != blank %}
                    <h3>{{ block.settings.contact_subheading }}</h3>
                  {% endif %}
                  {% if block.settings.contact_content != blank %}
                    {{ block.settings.contact_content }}
                  {% endif %}
                </div>
                <div class="eight columns offset-by-one columns omega">
                  {% form 'contact' %}
                    {% if form.posted_successfully? %}
                      <p class="quote">{{ 'contact.form.post_success' | t }}</p>
                    {% endif %}

                    {% if form.errors %}
                      <p class="quote">{{ 'general.forms.post_error' | t }}</p>

                     {% assign message = 'contact.form.message' | t %}
                      <ul class="center">
                        {% for field in form.errors %}
                          {% if field == 'form' %}
                            <li>
                              {{ form.errors.messages[field] }}
                            </li>
                          {% else %}
                            <li>
                              {% assign field_name = field | replace: 'body', message %}
                              {{ 'general.forms.post_field_error_html' | t: field: field_name, error: form.errors.messages[field] }}
                            </li>
                          {% endif %}
                        {% endfor %}
                       </ul>
                    {% endif %}

                     <div class="four columns alpha">
                      {% assign name_attr = 'contact.form.name' | handle %}
                      <label for="contactFormName">{{ 'contact.form.name' | t }} <span class="red">*</span></label>
                      <input type="text" id="contactFormName" name="contact[{{ name_attr }}]" placeholder="{{ 'contact.form.name' | t }}" autocapitalize="words" value="{% if form[name_attr] %}{{ form[name_attr] }}{% elsif customer %}{{ customer.name }}{% endif %}" required="required">
                     </div>
                     <div class="four columns omega">
                      <label for="contactFormEmail">{{ 'contact.form.email' | t }} <span class="red">*</span></label>
                      <input type="email" id="contactFormEmail" name="contact[email]" placeholder="{{ 'contact.form.email' | t }}" autocorrect="off" autocapitalize="off" value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}" required="required">
                     </div>
                     {% comment %}
                      {% assign name_attr = 'contact.form.phone' | t | handle %}
                      <label for="contactFormPhone" class="hidden-label">{{ 'contact.form.phone' | t }}</label>
                      <input type="tel" id="contactFormPhone" name="contact[{{ name_attr }}]" placeholder="{{ 'contact.form.phone' | t }}" pattern="[0-9\-]*" value="{% if form[name_attr] %}{{ form[name_attr] }}{% elsif customer %}{{ customer.phone }}{% endif %}">
                      {% endcomment %}

                    <label for="contactFormMessage">{{ 'contact.form.message' | t }} <span class="red">*</span></label>
                    <textarea rows="5" id="contactFormMessage" name="contact[body]" placeholder="{{ 'contact.form.message' | t }}" required="required">{% if form.body %}{{ form.body }}{% endif %}</textarea>

                    <input type="submit" class="submit action_button" value="{{ 'contact.form.send' | t }}" />
                  {% endform %}
                </div>
              {% elsif block.settings.contact_text_position == "right" %}
                <div class="eight columns alpha">
                  {% form 'contact' %}
                    {% if form.posted_successfully? %}
                      <p class="quote">{{ 'contact.form.post_success' | t }}</p>
                    {% endif %}

                    {% if form.errors %}
                      <p class="quote">{{ 'general.forms.post_error' | t }}</p>

                     {% assign message = 'contact.form.message' | t %}
                      <ul class="center">
                        {% for field in form.errors %}
                          {% if field == 'form' %}
                            <li>
                              {{ form.errors.messages[field] }}
                            </li>
                          {% else %}
                            <li>
                              {% assign field_name = field | replace: 'body', message %}
                              {{ 'general.forms.post_field_error_html' | t: field: field_name, error: form.errors.messages[field] }}
                            </li>
                          {% endif %}
                        {% endfor %}
                       </ul>
                    {% endif %}

                     <div class="four columns alpha">
                      {% assign name_attr = 'contact.form.name' | handle %}
                      <label for="contactFormName">{{ 'contact.form.name' | t }} <span class="red">*</span></label>
                      <input type="text" id="contactFormName" name="contact[{{ name_attr }}]" placeholder="{{ 'contact.form.name' | t }}" autocapitalize="words" value="{% if form[name_attr] %}{{ form[name_attr] }}{% elsif customer %}{{ customer.name }}{% endif %}" required="required">
                     </div>
                     <div class="four columns omega">
                      <label for="contactFormEmail">{{ 'contact.form.email' | t }} <span class="red">*</span></label>
                      <input type="email" id="contactFormEmail" name="contact[email]" placeholder="{{ 'contact.form.email' | t }}" autocorrect="off" autocapitalize="off" value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}" required="required">
                     </div>
                     {% comment %}
                      {% assign name_attr = 'contact.form.phone' | t | handle %}
                      <label for="contactFormPhone" class="hidden-label">{{ 'contact.form.phone' | t }}</label>
                      <input type="tel" id="contactFormPhone" name="contact[{{ name_attr }}]" placeholder="{{ 'contact.form.phone' | t }}" pattern="[0-9\-]*" value="{% if form[name_attr] %}{{ form[name_attr] }}{% elsif customer %}{{ customer.phone }}{% endif %}">
                      {% endcomment %}

                    <label for="contactFormMessage">{{ 'contact.form.message' | t }} <span class="red">*</span></label>
                    <textarea rows="5" id="contactFormMessage" name="contact[body]" placeholder="{{ 'contact.form.message' | t }}" required="required">{% if form.body %}{{ form.body }}{% endif %}</textarea>

                    <input type="submit" class="submit action_button" value="{{ 'contact.form.send' | t }}" />
                  {% endform %}
                </div>
                <div class="seven columns offset-by-one omega {% if block.settings.contact_text_alignment == "center" %}center{% elsif block.settings.contact_text_alignment == "right" %}align_right{% endif %}">
                  {% if block.settings.contact_subheading != blank %}
                    <h3>{{ block.settings.contact_subheading }}</h3>
                  {% endif %}
                  {% if block.settings.contact_content != blank %}
                    {{ block.settings.contact_content }}
                  {% endif %}
                </div>
              {% else %}
                <div class="ten columns omega offset-by-three {% if block.settings.contact_text_alignment == "center" %}center{% elsif block.settings.contact_text_alignment == "right" %}align_right{% endif %}">
                  {% if block.settings.contact_subheading != blank %}
                    <h3>{{ block.settings.contact_subheading }}</h3>
                  {% endif %}
                  {% if block.settings.contact_content != blank %}
                    {{ block.settings.contact_content }}
                  {% endif %}
                </div>
                <div class="ten offset-by-three columns omega">
                  {% form 'contact' %}
                    {% if form.posted_successfully? %}
                      <p class="quote">{{ 'contact.form.post_success' | t }}</p>
                    {% endif %}

                    {% if form.errors %}
                      <p class="quote">{{ 'general.forms.post_error' | t }}</p>

                     {% assign message = 'contact.form.message' | t %}
                      <ul class="center">
                        {% for field in form.errors %}
                          {% if field == 'form' %}
                            <li>
                              {{ form.errors.messages[field] }}
                            </li>
                          {% else %}
                            <li>
                              {% assign field_name = field | replace: 'body', message %}
                              {{ 'general.forms.post_field_error_html' | t: field: field_name, error: form.errors.messages[field] }}
                            </li>
                          {% endif %}
                        {% endfor %}
                       </ul>
                    {% endif %}

                     <div class="five columns alpha">
                      {% assign name_attr = 'contact.form.name' | handle %}
                      <label for="contactFormName">{{ 'contact.form.name' | t }} <span class="red">*</span></label>
                      <input type="text" id="contactFormName" name="contact[{{ name_attr }}]" placeholder="{{ 'contact.form.name' | t }}" autocapitalize="words" value="{% if form[name_attr] %}{{ form[name_attr] }}{% elsif customer %}{{ customer.name }}{% endif %}" required="required">
                     </div>
                     <div class="five columns omega">
                      <label for="contactFormEmail">{{ 'contact.form.email' | t }} <span class="red">*</span></label>
                      <input type="email" id="contactFormEmail" name="contact[email]" placeholder="{{ 'contact.form.email' | t }}" autocorrect="off" autocapitalize="off" value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}" required="required">
                     </div>
                     {% comment %}
                      {% assign name_attr = 'contact.form.phone' | t | handle %}
                      <label for="contactFormPhone" class="hidden-label">{{ 'contact.form.phone' | t }}</label>
                      <input type="tel" id="contactFormPhone" name="contact[{{ name_attr }}]" placeholder="{{ 'contact.form.phone' | t }}" pattern="[0-9\-]*" value="{% if form[name_attr] %}{{ form[name_attr] }}{% elsif customer %}{{ customer.phone }}{% endif %}">
                      {% endcomment %}

                    <label for="contactFormMessage">{{ 'contact.form.message' | t }} <span class="red">*</span></label>
                    <textarea rows="5" id="contactFormMessage" name="contact[body]" placeholder="{{ 'contact.form.message' | t }}" required="required">{% if form.body %}{{ form.body }}{% endif %}</textarea>

                    <input type="submit" class="submit action_button" value="{{ 'contact.form.send' | t }}" />
                  {% endform %}
                </div>
              {% endif %}
            </div>

          <!-- Featured video -->
          {% elsif block.type == "featured_video" %}
            {% assign default = '1400x' %}
            {% assign size1 = '480x' %}
            {% assign size2 = '765x' %}
            {% assign size3 = '900x' %}
            {% assign size4 = '1000x' %}
            {% assign size5 = '1100x' %}
            {% assign size6 = '1300x' %}
            {% assign size7 = '1500x' %}
            {% assign size8 = '1700x' %}
            {% assign size9 = '1900x' %}
            {% assign size10 = '2000x' %}
            <div class="video-section">
              <section  class="homepage-video darken-video-{{ block.settings.video_dark_overlay }}  placeholder-image--{% if block.settings.image %}true{% else %}false{% endif %}"
                    data-video-id="video-{{block.id}}"
                    data-autoplay="{{ block.settings.autoplay }}"
                    data-autoloop="{{ block.settings.autoloop }}"
                    data-display-text-over-video="{{ block.settings.display_text_over_video }}"
                    data-poster-image="{% if block.settings.image %}{{ block.settings.image | img_url: '1500x' }}{% else %}false{% endif %}"
                    data-video-src="{{ block.settings.video.id }}"
                    data-aspect-ratio="{{ block.settings.aspect_ratio }}"
                    data-provider="{{ block.settings.source }}"
                    data-video-mp4="{{ block.settings.mp4 }}"
                    data-video-ogv="{{ block.settings.ogv }}"
              >
                <div class="homepage-video--media">
                  {% if block.settings.image %}
                    <img  src="{{ block.settings.image | img_url: '100x', format: 'pjpg' }}"
                          alt="{% if block.settings.image.alt != blank %}{{ block.settings.image.alt | escape }}{% else %}{{ block.settings.title | escape }}{% endif %}"
                          class="lazyload {{ settings.image_loading_style }} homepage-video__image"
                          data-play-video
                          sizes="100vw"
                          data-src="{{ block.settings.image | img_url: default, format: 'pjpg' }}"
                          srcset="
                          {{ block.settings.image | img_url: default, format: 'pjpg' }} {{default | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size1, format: 'pjpg' }} {{size1 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size2, format: 'pjpg' }} {{size2 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size3, format: 'pjpg' }} {{size3 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size4, format: 'pjpg' }} {{size4 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size5, format: 'pjpg' }} {{size5 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size6, format: 'pjpg' }} {{size6 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size7, format: 'pjpg' }} {{size7 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size8, format: 'pjpg' }} {{size8 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size9, format: 'pjpg' }} {{size9 | replace: 'x', 'w'}},
                          {{ block.settings.image | img_url: size10, format: 'pjpg' }} {{size10 | replace: 'x', 'w'}}"
                           />
                  {% else %}
                    <div class="homepage-video__placeholder" data-play-video>
                      {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg placeholder-svg--video' }}
                    </div>
                  {% endif %}
                  {% unless block.settings.pretext == blank and block.settings.title == blank and block.settings.subtitle == blank and block.settings.button1_label == blank and block.settings.button2_label == blank %}
                    <div class="position-{{ block.settings.text_position }} caption js-caption text-on-video text-on-video--{{ block.settings.display_text_over_video }}">
                      <div class="caption-content
                                  caption-background-{{block.settings.caption_background}}
                                  caption-transparency-{{ block.settings.caption_background_transparency }}
                                  align-{{block.settings.text_align}}">
                        {% if block.settings.pretext != blank %}
                          <div class="pretext">
                            {{ block.settings.pretext }}
                          </div>
                        {% endif %}
                        {% if block.settings.title != blank %}
                          <h1 class="headline">
                            {{ block.settings.title }}
                          </h1>
                        {% endif %}
                        {% if block.settings.subtitle != blank %}
                          <div class="subtitle">
                            {{ block.settings.subtitle }}
                          </div>
                        {% endif %}
                        {% if block.settings.button1_label != blank %}
                          <a {% if block.settings.button1_link != blank %}href="{{ block.settings.button1_link }}"{% else %}data-play-video-button{% endif %} class="action_button first_button highlight-{{ block.settings.button1_highlight }} {% if block.settings.button1_link == blank %}video__play-button{% endif %}">
                            {{ block.settings.button1_label }}
                          </a>
                        {% endif %}
                        {% if block.settings.button2_label != blank %}
                          <a {% if block.settings.button2_link != blank %}href="{{ block.settings.button2_link }}"{% else %}data-play-video{% endif %} class="action_button second_button highlight-{{ block.settings.button2_highlight }} {% if block.settings.button2_link == blank %}video__play-button{% endif %}">
                            {{ block.settings.button2_label }}
                          </a>
                        {% endif %}
                      </div>
                    </div>
                  {% endunless %}
                </div>
              </section>

              {% unless block.settings.pretext == blank and block.settings.title == blank and block.settings.subtitle == blank and block.settings.button1_label == blank and block.settings.button2_label == blank %}
                <section class="position-{{ block.settings.text_position }} caption js-caption text-on-video outside-homepage-video">
                  <div class="caption-content align-{{ block.settings.text_align }}">
                    {% if block.settings.pretext != blank %}
                      <div class="pretext">
                        {{ block.settings.pretext }}
                      </div>
                    {% endif %}
                    {% if block.settings.title != blank %}
                      <h1 class="headline">
                        {{ block.settings.title }}
                      </h1>
                    {% endif %}
                    {% if block.settings.subtitle != blank %}
                      <div class="subtitle">
                        {{ block.settings.subtitle }}
                      </div>
                    {% endif %}
                    {% if block.settings.button1_label != blank and block.settings.button1_link != blank %}
                      <a href="{{ block.settings.button1_link }}" class="action_button first_button highlight-{{ block.settings.button1_highlight }}">
                        {{ block.settings.button1_label }}
                      </a>
                    {% endif %}
                    {% if block.settings.button2_label != blank and block.settings.button2_link != blank %}
                      <a href="{{ block.settings.button2_link }}" class="action_button first_button highlight-{{ block.settings.button2_highlight }}">
                        {{ block.settings.button2_label }}
                      </a>
                    {% endif %}
                  </div>
                </section>
              {% endunless %}
            </div>

          <!-- Image gallery -->
          {% elsif block.type == 'image_gallery' %}
            <div class="container">
              <div class="sixteen columns">
                <div class="one-third column alpha thumbnail gallery-image-wrapper">
                  {% if block.settings.product_detail_image_1 %}
                    <div class="gallery-cell">
                      <a href="{{ block.settings.product_detail_image_1 | img_url: '1520x' }}" class="lightbox" rel="detail-gallery">
                        <img src="{{ block.settings.product_detail_image_1 | img_url: '760x' }}" alt="{{ block.settings.product_detail_image_1.alt }}">
                      </a>
                    </div>
                  {% else %}
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  {% endif %}
                </div>
                <div class="one-third column thumbnail gallery-image-wrapper">
                  {% if block.settings.product_detail_image_2 %}
                    <div class="gallery-cell">
                      <a href="{{ block.settings.product_detail_image_2 | img_url: '1520x' }}" class="lightbox" rel="detail-gallery">
                        <img src="{{ block.settings.product_detail_image_2 | img_url: '760x' }}" alt="{{ block.settings.product_detail_image_2.alt }}">
                      </a>
                    </div>
                  {% else %}
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  {% endif %}
                </div>
                <div class="one-third column omega thumbnail gallery-image-wrapper">
                  {% if block.settings.product_detail_image_3 %}
                    <div class="gallery-cell">
                      <a href="{{ block.settings.product_detail_image_3 | img_url: '1520x' }}" class="lightbox" rel="detail-gallery">
                        <img src="{{ block.settings.product_detail_image_3 | img_url: '760x' }}" alt="{{ block.settings.product_detail_image_3.alt }}">
                      </a>
                    </div>
                  {% else %}
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  {% endif %}
                </div>
              </div>
            </div>

          <!-- Image with text -->
          {% elsif block.type == 'image_with_text' %}
            {% if block.settings.layout == 'standard' %}
              <div class="container standard--width">
            {% endif %}
            <div class="featured_collections
              clearfix across-1 image-align--{{ block.settings.frontpage_image_position }}">
              <section class="featured-link--section featured-link--image section-{{ forloop.index }}">
                <div class="featured-link--half featured-link--image {% if block.settings.layout == 'standard' %}featured-link--margin{% endif %}">
                  <div class="featured-link--wrap">
                    <a {% if block.settings.link != blank %}href="{{ block.settings.link }}"{% endif %} title="{{ block.settings.title }}">
                      {% if block.settings.image %}
                        <img  src="{{ block.settings.image | img_url: '100x' }}"
                              alt="{% if block.settings.image.alt != blank %}{{ block.settings.image.alt }}{% else %}{{ block.settings.title | escape }}{% endif %}"
                              class="lazyload full-width-image {{ settings.image_loading_style }}"
                              data-sizes="auto"
                              data-src="{{ block.settings.image | img_url: '1400x' }}"
                              data-srcset=" {{ block.settings.image | img_url: '2048x' }} 2048w,
                                            {{ block.settings.image | img_url: '1600x' }} 1600w,
                                            {{ block.settings.image | img_url: '1200x' }} 1200w,
                                            {{ block.settings.image | img_url: '1000x' }} 1000w,
                                            {{ block.settings.image | img_url: '800x' }} 800w,
                                            {{ block.settings.image | img_url: '600x' }} 600w,
                                            {{ block.settings.image | img_url: '400x' }} 400w"
                              />
                      {% else %}
                        {% capture i %}{% cycle "1", "2", "3", "4", "5", "6" %}{% endcapture %}
                        {{ 'collection-' | append: i | placeholder_svg_tag: 'placeholder-svg placeholder-svg--promotions' }}
                      {% endif %}
                    </a>
                  </div>
                </div>
                <div class="featured-link--half">
                  <div class="info text-align--{{block.settings.frontpage_text_align}}">
                    <a {% if block.settings.link != blank %}href="{{ block.settings.link }}"{% endif %} class="collection_title">
                      {{ block.settings.title }}
                    </a>
                    {% if block.settings.text != blank %}
                      <div class="description">{{ block.settings.text }}</div>
                    {% endif %}
                    {% if block.settings.button_label != blank %}
                      <a {% if block.settings.link != blank %}href="{{ block.settings.link }}"{% endif %} class="button">
                        {{ block.settings.button_label }}
                      </a>
                    {% endif %}
                  </div>
                </div>
              </section>
            </div>
            {% if block.settings.layout == 'standard' %}
              </div>
            {% endif %}

            {% if block.settings.layout == 'standard' %}
              <style>
                .standard--width .featured-link--margin {
                  margin-left: 0%;
                  margin-right: 3%;
                }

                .standard--width .image-align--right .featured-link--margin {
                  margin-left: 3%;
                  margin-right: 0%;
                }

                .standard--width .featured-link--half {
                  width: 45%;
                }
              </style>
            {% endif %}

          <!-- Map -->
          {% elsif block.type == 'map' %}
            {% if block.settings.contact_address != blank %}
              {% if block.settings.map_stretch %}
                <div class="embed-container maps {% if block.settings.map_greyscale %}grey-map{% endif %}">
                  <iframe width="100%" height="{{ block.settings.map_height }}" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q={% if block.settings.contact_address != blank %}{{ block.settings.contact_address | replace: ' ', '+' }}{% endif %}&amp;z={{ block.settings.zoom_level }}&amp;output=embed" {% if block.settings.map_scrolling %}style="pointer-events: auto;"{% endif %}></iframe>
                </div>
              {% else %}
                <div class="container">
                  <div class="sixteen columns">
                    <div class="embed-container maps {% if block.settings.map_greyscale %}grey-map{% endif %}">
                      <iframe width="100%" height="{{ block.settings.map_height }}" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q={% if block.settings.contact_address != blank %}{{ block.settings.contact_address | replace: ' ', '+' }}{% endif %}&amp;z={{ block.settings.zoom_level }}&amp;output=embed" {% if block.settings.map_scrolling %}style="pointer-events: auto;"{% endif %}></iframe>
                    </div>
                  </div>
                </div>
              {% endif %}
            {% else %}
              {% if block.settings.map_stretch %}
                <div class="map-placeholder" style="height: {{ block.settings.map_height }}px;">
                  {% capture i %}{% cycle "1", "2" %}{% endcapture %}
                  {{ 'lifestyle-' | append: i | placeholder_svg_tag: 'placeholder-svg placeholder-svg--map' }}
                </div>
              {% else %}
                <div class="container">
                  <div class="sixteen columns">
                    <div class="map-placeholder" style="height: {{ block.settings.map_height }}px;">
                      {% capture i %}{% cycle "1", "2" %}{% endcapture %}
                      {{ 'lifestyle-' | append: i | placeholder_svg_tag: 'placeholder-svg placeholder-svg--map' }}
                    </div>
                  </div>
                </div>
              {% endif %}
            {% endif %}

          <!-- Page -->
          {% elsif block.type == "page" %}
            <div class="homepage_content featured_content clearfix">
              <div class="container">
                <div class="sixteen columns">
                  <div class="section clearfix">
                  {% if block.settings.content_page != blank %}
                    {% include 'page-multi-column', content: pages[block.settings.content_page].content %}
                  {% else %}
                    <p class="center onboard-text">
                      {{ 'homepage.onboarding.no_content' | t }}
                    </p>
                  {% endif %}
                  </div>
                </div>
              </div>
            </div>

          <!-- Quote -->
          {% elsif block.type == 'quote' %}
            <div class="container">
              <div class="sixteen columns">
                <h4 class="quote">
                  {% if block.settings.quote_link != blank %}
                    <a href="{{ block.settings.quote_link }}">
                      {{ block.settings.quote_text }}
                    </a>
                  {% else %}
                    {{ block.settings.quote_text }}
                  {% endif %}
                </h4>
              </div>
            </div>

          <!-- Rich text and image -->
          {% elsif block.type == 'rich_text_and_image' %}
          <div class="container">
            <div class="sixteen columns">
              <div class="homepage_content section {{ block.settings.text_alignment }} clearfix">
                {% if block.settings.image %}
                  <img  src="{{ block.settings.image.src | img_url: '300x' }}"
                        class="lazyload {{ settings.image_loading_style }}"
                        alt="{{ block.settings.image.alt }}"
                        style="max-width: {{- section.settings.image.width -}}px;"
                        data-sizes="auto"
                        data-src="{{ block.settings.image | img_url: '2048x' }}"
                        data-srcset=" {{ block.settings.image | img_url: '2048x' }} 2048w,
                                      {{ block.settings.image | img_url: '1600x' }} 1600w,
                                      {{ block.settings.image | img_url: '1200x' }} 1200w,
                                      {{ block.settings.image | img_url: '1000x' }} 1000w,
                                      {{ block.settings.image | img_url: '800x' }} 800w,
                                      {{ block.settings.image | img_url: '600x' }} 600w,
                                      {{ block.settings.image | img_url: '400x' }} 400w"
                        />
                {% endif %}
                {% if block.settings.title != blank %}
                  <h2 class="title">
                    {{ block.settings.title }}
                  </h2>
                  <div class="feature_divider"></div>
                {% endif %}
                <div class="{{ block.settings.text_size }}">
                  {% if block.settings.content != blank %}
                    {{ block.settings.content }}
                  {% endif %}
                  {% if block.settings.button_label != blank %}
                    <a href="{{ block.settings.button_link }}" class="action_button">
                      {{ block.settings.button_label }}
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>

          <!-- Divider -->
          {% elsif block.type == 'divider' %}
            <div class="container">
              <div class="sixteen columns">
                <hr class="page-divider {% if block.settings.divider_border %}active-divider{% endif %}" style="{% if block.settings.divider_spacing %}margin: {{ block.settings.divider_spacing }}px 0px;{% endif %}">
              </div>
            </div>

          <!-- Featured collection -->
          {% elsif block.type == "featured_collection" %}

            {% if block.settings.collection == blank %}
              {%- assign section_onboarding = true -%}
              {% comment %}assign product length to be selected limit for onboarding{% endcomment %}
              {% assign products_length = block.settings.products_limit | plus: 0 %}
            {% else %}
              {%- assign section_onboarding = false -%}
            {% endif %}

            <div class="container featured_products product-{{ block.settings.collection_style }}">
              <div class="sixteen columns center homepage_content">
                {% if block.settings.title != blank %}
                  <a href="{{ collections[block.settings.collection].url }}"><h2 class="title">{{ block.settings.title }}</h2></a>
                <div class="feature_divider"></div>
                {% endif %}
                {% if collections[block.settings.collection].description != blank %}
                  <div class="section clearfix">
                    {{ collections[block.settings.collection].description }}
                  </div>
                {% endif %}
              </div>
            </div>

            {% assign limit = block.settings.products_limit %}

            {% if block.settings.collection_style == 'slider' %}
              {% assign col = block.settings.collection %}
              {% assign products = collections[block.settings.collection].products %}
              {% assign per_slide = block.settings.products_per %}

              <div class="container js-product-slider homepage-product-slider full-width {% if per_slide == 2 or per_slide == 4 or per_slide == 6 %}even-num-slides{% endif %}">
                {% if section_onboarding == false %}
                  {% if col and collections[col].all_products_count > 0 %}
                    {% include 'product-slider', per_slide: block.settings.products_per, featured_collection: col  %}
                  {% endif %}
                {% else %}
                  <div class="slider-gallery products-slider products-length-{{ products_length }}"
                        data-products-per-slide="{{ per_slide }}"
                        data-products-limit="{{ limit }}"
                        data-products-available="{{ products_length }}">
                    {% for i in (1..limit) %}
                      {% assign per_slide_num = block.settings.products_per | plus: 0 %}
                      <div class="gallery-cell thumbnail
                      {% if products_length > per_slide_num %}visible-{{ per_slide }}{% else %}visible-{{ products_length }}{% endif %}
                      " itemprop="itemListElement" itemscope itemtype="http://schema.org/Product">
                        <div class="product-wrap">
                          <div class="relative product_image">
                            <a href="#" itemprop="url">
                              <object class="placeholder-image">
                                {% capture num %}{% cycle "1", "2", "3", "4", "5", "6" %}{% endcapture %}
                                {{ 'product-' | append: num | placeholder_svg_tag: 'placeholder-svg placeholder-svg--product' }}
                              </object>
                            </a>
                          </div>
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            {% else %}
              {% if section_onboarding == false %}
                {% assign limit = block.settings.products_limit | plus: 1 %}
                {% assign collection = collections[block.settings.collection] %}
                {% assign products = collections[block.settings.collection].products %}
                {% assign products_per_row = block.settings.products_per %}
                <div class="container">
                  <div class="sixteen columns">
                    {% include 'product-loop' %}
                  </div>
                </div>
              {% else %}
                {% assign products_per_row = block.settings.products_per %}
                <div class="container">
                  <div class="sixteen columns">
                    {% capture new_row %}
                        <br class="clear product_clear" />
                    {% endcapture %}

                    <div itemtype="http://schema.org/ItemList" class="product-list collection-matrix clearfix">
                      {% for i in (1..limit) %}
                        {% comment %}{% assign collection_group = products | map: 'id' %}{% endcomment %}
                        {% assign collection_group_thumb = collection_group | append : 'thumb' %}
                        {% assign collection_group_mobile = collection_group | append : 'mobile' %}
                          <div class="
                          {% if products_per_row == 2 %}
                            eight columns {% cycle collection_group_thumb: 'alpha', 'omega' %}
                          {% elsif products_per_row == 3 %}
                            one-third column {% cycle collection_group_thumb: 'alpha', '', 'omega' %}
                          {% elsif products_per_row == 4 %}
                            four columns {% cycle collection_group_thumb: 'alpha', '', '', 'omega' %}
                          {% elsif products_per_row == 5 %}
                            one-fifth column {% cycle collection_group_thumb: 'alpha', '', '', '', 'omega' %}
                          {% elsif products_per_row == 6 %}
                            one-sixth column {% cycle collection_group_thumb: 'alpha', '', '', '', '', 'omega' %}
                          {% else %}
                            one-seventh column {% cycle collection_group_thumb: 'alpha', '', '', '', '', '', 'omega' %}
                          {% endif %} thumbnail {% cycle collection_group_mobile: 'even', 'odd' %}" itemprop="itemListElement" itemscope itemtype="http://schema.org/Product">

                          <div class="product-wrap">
                            <div class="relative product_image swap-{{ settings.collection_secondary_image }}">
                              <a href="#" itemprop="url">
                                {% capture num %}{% cycle "1", "2", "3", "4", "5", "6" %}{% endcapture %}
                                {{ 'product-' | append: num | placeholder_svg_tag: 'placeholder-svg placeholder-svg--product' }}
                              </a>
                            </div>
                          </div>
                        </div>

                        {% if products_per_row == 2 %}
                          {% cycle collection_group: '', new_row %}
                        {% elsif products_per_row == 3 %}
                          {% cycle collection_group: '', '', new_row %}
                        {% elsif products_per_row == 4 %}
                          {% cycle collection_group: '', '', '', new_row %}
                        {% elsif products_per_row == 5 %}
                          {% cycle collection_group: '', '', '', '', new_row %}
                        {% elsif products_per_row == 6 %}
                          {% cycle collection_group: '', '', '', '', '', new_row %}
                        {% elsif products_per_row == 7 %}
                          {% cycle collection_group: '', '', '', '', '', '', new_row %}
                        {% endif %}
                      {% endfor %}
                    </div>
                  </div>
                </div>
              {% endif %}
            {% endif %}

          <!-- Image with text overlay -->
          {% elsif block.type == 'image_with_text_overlay' %}

            {% assign default = '1400x' %}
            {% assign size1 = '480x' %}
            {% assign size2 = '765x' %}
            {% assign size3 = '900x' %}
            {% assign size4 = '1000x' %}
            {% assign size5 = '1100x' %}
            {% assign size6 = '1300x' %}
            {% assign size7 = '1500x' %}
            {% assign size8 = '1700x' %}
            {% assign size9 = '1900x' %}
            {% assign size10 = '2000x' %}

            <div id="banner-{{section.id}}" class="banner">
              {% if block.settings.image != nil %}
                <img  src="{{ block.settings.image | img_url: '100x', format: 'pjpg' }}"
                      alt="{{ block.settings.image.alt | escape }}"
                      class="lazyload {{ settings.image_loading_style }}"
                      sizes="100vw"
                      data-src="{{ block.settings.image | img_url: default, format: 'pjpg' }}"
                      srcset="
                      {{ block.settings.image | img_url: default, format: 'pjpg' }} {{default | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size1, format: 'pjpg' }} {{size1 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size2, format: 'pjpg' }} {{size2 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size3, format: 'pjpg' }} {{size3 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size4, format: 'pjpg' }} {{size4 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size5, format: 'pjpg' }} {{size5 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size6, format: 'pjpg' }} {{size6 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size7, format: 'pjpg' }} {{size7 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size8, format: 'pjpg' }} {{size8 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size9, format: 'pjpg' }} {{size9 | replace: 'x', 'w'}},
                      {{ block.settings.image | img_url: size10, format: 'pjpg' }} {{size10 | replace: 'x', 'w'}}"

                       />
              {% else %}
                {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg placeholder-svg--banner' }}
              {% endif %}
              {% unless block.settings.button1_link != blank and block.settings.button2_link != blank %}
                {% if block.settings.button1_link != blank %}
                  <a href="{{ block.settings.button1_link }}" class="banner-full-link">
                    {{ block.settings.title }}
                  </a>
                {% elsif block.settings.button2_link != blank %}
                  <a href="{{ block.settings.button2_link }}" class="banner-full-link">
                    {{ block.settings.title }}
                  </a>
                {% endif %}
              {% endunless %}
              {% unless block.settings.pretext == blank and block.settings.title == blank and block.settings.subtitle == blank and block.settings.button1 == blank and block.settings.button2 == blank %}
                <div class="position-{{ block.settings.text_position }} caption js-caption">
                  <div class="caption-content caption-background-{{ block.settings.caption_background }} caption-transparency-{{ block.settings.caption_background_transparency }} align-{{block.settings.text_align }}">
                    {% if block.settings.pretext != blank %}
                      <div class="pretext">
                        {{ block.settings.pretext }}
                      </div>
                    {% endif %}
                    {% if block.settings.title != blank %}
                      <p class="headline">
                        {{ block.settings.title }}
                      </p>
                    {% endif %}
                    {% if block.settings.subtitle != blank %}
                      <div class="subtitle">
                        {{ block.settings.subtitle }}
                      </div>
                    {% endif %}
                    {% if block.settings.button1 != blank %}
                      <a {% if block.settings.button1_link != blank %}href="{{ block.settings.button1_link }}"{% endif %} class="action_button first_button highlight-{{ block.settings.button1_highlight }}">
                        {{ block.settings.button1 }}
                      </a>
                    {% endif %}
                    {% if block.settings.button2 != blank %}
                      <a {% if block.settings.button2_link != blank %}href="{{ block.settings.button2_link }}"{% endif %} class="action_button second_button highlight-{{ block.settings.button2_highlight }}">
                        {{ block.settings.button2 }}
                      </a>
                    {% endif %}
                  </div>
                </div>
              {% endunless %}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    {% endif %}
  </div>

  {% if settings.enable_shopify_review_comments and settings.review_position == "below_product_details" %}
    <div class="container">
      <div class="sixteen columns">
        <div class="shopify-reviews">
          <div id="shopify-product-reviews" data-id="{{product.id}}">{{ product.metafields.spr.reviews }}</div>
        </div>
      </div>
    </div>
  {% endif %}

  {% if section.settings.related_products_position == "below" %}
    {% if section.settings.display_related_products %}
      {% include 'related-products' %}
    {% endif %}
  {% endif %}

  {% if section.settings.display_recently_viewed %}
    {% include 'recently-viewed' %}
  {% else %}
    </div><!-- closes <div class="container main content"> -->
  {% endif %}

</div>
</div>

{% schema %}

{
  "name": "Product",
  "class": "product-template product-details-section",
  "max_blocks": 20,
  "settings": [
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "checkbox",
      "id": "gallery_arrows",
      "label": "Show arrows on product gallery"
    },
    {
      "type": "checkbox",
      "id": "activate_zoom",
      "label": "Magnify product images on hover"
    },
    {
      "type": "checkbox",
      "id": "enable_product_lightbox",
      "label": "Enable product gallery popup",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "activate_autoplay",
      "label": "Enable product gallery slideshow"
    },
    {
      "type": "select",
      "id": "slideshow_animation",
      "label": "Gallery transition",
      "options": [
        {
          "value": "slide",
          "label": "Slide"
        },
        {
          "value": "fade",
          "label": "Fade"
        }
      ],
      "default": "slide"
    },
    {
      "type": "radio",
      "id": "product_images_position",
      "label": "Gallery position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "product_thumbs",
      "label": "Show product gallery thumbnails"
    },
    {
      "type": "select",
      "id": "thumbnail_position",
      "label": "Thumbnail position",
      "default": "bottom-thumbnails",
      "options": [
        {
          "value": "left-thumbnails",
          "label": "Left"
        },
        {
          "value": "bottom-thumbnails",
          "label": "Bottom"
        },
        {
          "value": "right-thumbnails",
          "label": "Right"
        }
      ]
    },
    {
      "type": "header",
      "content": "Description"
    },
    {
      "type": "checkbox",
      "id": "product_breadcrumb",
      "label": "Show breadcrumb links"
    },
    {
      "type": "checkbox",
      "id": "display_vendor",
      "label": "Show vendor"
    },
    {
      "type": "checkbox",
      "id": "display_sku",
      "label": "Show SKU"
    },
    {
      "type": "checkbox",
      "id": "display_savings",
      "label": "Show price savings",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "display_collections",
      "label": "Show collections"
    },
    {
      "type": "checkbox",
      "id": "display_type",
      "label": "Show type"
    },
    {
      "type": "checkbox",
      "id": "display_tags",
      "label": "Show tags"
    },
    {
      "type": "checkbox",
      "id": "display_social_buttons",
      "label": "Show social media share icons",
      "default": true
    },
    {
      "type": "radio",
      "id": "product_description_position",
      "label": "Description position",
      "options": [
        {
          "value": "top",
          "label": "Above product form"
        },
        {
          "value": "bottom",
          "label": "Below product form"
        }
      ]
    },
    {
      "type": "header",
      "content": "Related products"
    },
    {
      "type": "checkbox",
      "id": "display_related_products",
      "label": "Show related products ([?](https:\/\/help.outofthesandbox.com\/hc\/en-us\/articles\/115006909487-Related-Products))"
    },
    {
      "type": "radio",
      "id": "related_products_style",
      "label": "Layout",
      "default": "grid",
      "options": [
        {
          "value": "slider",
          "label": "Slider"
        },
        {
          "value": "grid",
          "label": "Grid"
        }
      ]
    },
    {
      "type": "range",
      "id": "related_products_limit",
      "label": "Limit products",
      "min": 2,
      "max": 50,
      "step": 1,
      "default": 12
    },
    {
      "type": "range",
      "id": "products_per",
      "label": "Products per row",
      "min": 3,
      "max": 5,
      "step": 1,
      "default": 3
    },
    {
      "type": "radio",
      "id": "related_products_position",
      "label": "Position",
      "options": [
        {
          "value": "above",
          "label": "Above content"
        },
        {
          "value": "below",
          "label": "Below content"
        }
      ],
      "default": "below"
    },
    {
      "type": "header",
      "content": "Recently viewed products"
    },
    {
      "type": "paragraph",
      "content": "To test the recently viewed products, view your online store outside of the Editor and visit multiple product pages ([?](https:\/\/help.outofthesandbox.com\/hc\/en-us\/articles\/115008765228))"
    },
    {
      "type": "checkbox",
      "id": "display_recently_viewed",
      "label": "Show recently viewed products",
      "default": false
    },
    {
      "type": "text",
      "id": "rv_title",
      "label": "Title",
      "default": "Recently Viewed Items"
    },
    {
      "type": "radio",
      "id": "rv_products_style",
      "label": "Layout",
      "default": "grid",
      "options": [
        {
          "value": "slider",
          "label": "Slider"
        },
        {
          "value": "grid",
          "label": "Grid"
        }
      ]
    },
    {
      "type": "range",
      "id": "rv_max_display",
      "label": "Products limit",
      "min": 3,
      "max": 12,
      "step": 1,
      "default": 6
    },
    {
      "type": "range",
      "id": "rv_per",
      "label": "Products per row",
      "min": 3,
      "max": 5,
      "step": 1,
      "default": 3
    }
  ],
  "blocks": [
    {
      "type": "blog_posts",
      "name": "Blog posts",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Blog posts"
        },
        {
          "type": "blog",
          "id": "blog_widget_select",
          "label": "Blog"
        },
        {
          "type": "range",
          "id": "home_page_articles",
          "label": "Posts",
          "min": 2,
          "max": 4,
          "step": 1,
          "default": 3
        },
        {
          "type": "checkbox",
          "id": "blog_tags",
          "label": "Show blog post tags"
        },
        {
          "type": "checkbox",
          "id": "blog_author",
          "label": "Show author"
        },
        {
          "type": "checkbox",
          "id": "blog_date",
          "label": "Show date",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "blog_comment_count",
          "label": "Show comment count",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "read_more_link",
          "label": "Show continue reading link for blog post excerpts",
          "default": true
        }
      ]
    },
    {
      "type": "contact_form",
      "name": "Contact form",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Get in touch"
        },
        {
          "type": "text",
          "id": "contact_subheading",
          "label": "Subheading",
          "default": "Leave a message"
        },
        {
          "type": "richtext",
          "id": "contact_content",
          "label": "Text",
          "default": "<p>Phasellus viverra nulla ut metus varius laoreet. Etiam sollicitudin, ipsum eu pulvinar rutrum, tellus ipsum laoreet sapien, quis venenatis ante odio sit amet eros. Etiam imperdiet imperdiet orci.</p>"
        },
        {
          "type": "select",
          "id": "contact_text_position",
          "label": "Text position",
          "default": "left",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ]
        },
        {
          "type": "select",
          "id": "contact_text_alignment",
          "label": "Text alignment",
          "default": "left",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ]
        }
      ]
    },
    {
      "type": "divider",
      "name": "Divider",
      "settings": [
        {
          "type": "range",
          "id": "divider_spacing",
          "min": 0,
          "max": 30,
          "step": 5,
          "unit": "px",
          "label": "Space",
          "default": 20
        },
        {
          "type": "checkbox",
          "id": "divider_border",
          "label": "Show border",
          "default": false
        }
      ]
    },
    {
      "type": "featured_collection",
      "name": "Featured collection",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Featured collection"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
          "type": "radio",
          "id": "collection_style",
          "label": "Collection layout",
          "default": "grid",
          "options": [
            {
              "value": "slider",
              "label": "Slider"
            },
            {
              "value": "grid",
              "label": "Grid"
            }
          ]
        },
        {
          "type": "range",
          "id": "products_per",
          "label": "Products per row",
          "min": 2,
          "max": 7,
          "step": 1,
          "default": 3
        },
        {
          "type": "range",
          "id": "products_limit",
          "label": "Limit products",
          "min": 2,
          "max": 50,
          "step": 1,
          "default": 48
        }
      ]
    },
    {
      "type": "featured_video",
      "name": "Featured video",
      "settings": [
        {
          "type": "select",
          "id": "source",
          "label": "Video source",
          "options": [
            {
              "value": "youtube",
              "label": "YouTube"
            },
            {
              "value": "vimeo",
              "label": "Vimeo"
            },
            {
              "value": "html5",
              "label": "HTML5"
            }
          ],
          "default": "youtube"
        },
        {
          "type": "select",
          "id": "aspect_ratio",
          "label": "Aspect ratio",
          "options": [
            {
              "value": "16:9",
              "label": "16:9"
            },
            {
              "value": "4:3",
              "label": "4:3"
            }
          ],
          "default": "16:9"
        },
        {
          "type": "checkbox",
          "id": "autoplay",
          "label": "Autoplay video",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "autoloop",
          "label": "Autoloop video",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "video_dark_overlay",
          "label": "Darken video"
        },
        {
          "type": "video_url",
          "id": "video",
          "label": "YouTube or Vimeo video URL",
          "accept": ["youtube", "vimeo"],
          "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc"
        },
        {
          "type": "text",
          "id": "mp4",
          "label": "HTML5 MP4 File URL"
        },
        {
          "type": "text",
          "id": "ogv",
          "label": "HTML5 OGV File URL (optional)"
        },
        {
          "type": "header",
          "content": "Content"
        },
       {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "1600 x 900px recommended"
        },
        {
          "type": "checkbox",
          "id": "display_text_over_video",
          "label": "Show text when video is playing",
          "default": false
        },
        {
          "type": "richtext",
          "id": "pretext",
          "label": "Preheading"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "subtitle",
          "label": "Subheading"
        },
        {
          "type": "select",
          "id": "text_position",
          "label": "Text position",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "center"
        },
        {
          "type": "select",
          "id": "text_align",
          "label": "Text alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "center"
        },
        {
          "type": "checkbox",
          "id": "caption_background",
          "label": "Display solid text background"
        },
        {
          "type": "checkbox",
          "id": "caption_background_transparency",
          "label": "Enable background transparency"
        },
        {
          "type": "text",
          "id": "button1_label",
          "label": "First button label"
        },
        {
          "type": "url",
          "id": "button1_link",
          "label": "First button link URL"
        },
        {
          "type": "checkbox",
          "id": "button1_highlight",
          "label": "Highlight first button"
        },
        {
          "type": "text",
          "id": "button2_label",
          "label": "Second button label"
        },
        {
          "type": "url",
          "id": "button2_link",
          "label": "Second button link URL"
        },
        {
          "type": "checkbox",
          "id": "button2_highlight",
          "label": "Highlight second button"
        }
      ]
    },
    {
      "type": "image_gallery",
      "name": "Image gallery",
      "settings": [
        {
          "type": "image_picker",
          "id": "product_detail_image_1",
          "label": "Image",
          "info": "760 x 500px recommended"
        },
        {
          "type": "image_picker",
          "id": "product_detail_image_2",
          "label": "Image",
          "info": "760 x 500px recommended"
        },
        {
          "type": "image_picker",
          "id": "product_detail_image_3",
          "label": "Image",
          "info": "760 x 500px recommended"
        }
      ]
    },
    {
      "type": "image_with_text",
      "name": "Image with text",
      "settings": [
        {
          "type": "select",
          "id": "layout",
          "label": "Wide display",
          "options": [
            {
              "value": "standard",
              "label": "Standard"
            },
            {
              "value": "fullwidth",
              "label": "Full width"
            }
          ],
          "default": "fullwidth"
        },
        {
          "type": "select",
          "id": "frontpage_text_align",
          "label": "Text alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ]
        },
        {
          "type": "select",
          "id": "frontpage_image_position",
          "label": "Image position",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ]
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Your headline"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Promotion description appears here.</p>"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "View all"
        }
      ]
    },
    {
      "type": "image_with_text_overlay",
      "name": "Image with text overlay",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "1800 x 1000px recommended"
        },
        {
          "type": "richtext",
          "id": "pretext",
          "label": "Preheading",
          "default": "<p>This is</p>"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Your headline"
        },
        {
          "type": "richtext",
          "id": "subtitle",
          "label": "Subheading",
          "default": "<p>Customize this section</p>"
        },
        {
          "type": "checkbox",
          "id": "caption_background",
          "label": "Display solid text background",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "caption_background_transparency",
          "label": "Enable background transparency"
        },
        {
          "type": "select",
          "id": "text_position",
          "label": "Text position",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ]
        },
        {
          "type": "select",
          "id": "text_align",
          "label": "Text alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ]
        },
        {
          "type": "text",
          "id": "button1",
          "label": "First button label",
          "default": "Button"
        },
        {
          "type": "url",
          "id": "button1_link",
          "label": "First button link"
        },
        {
          "type": "checkbox",
          "id": "button1_highlight",
          "label": "Highlight first button"
        },
        {
          "type": "text",
          "id": "button2",
          "label": "Second button label"
        },
        {
          "type": "url",
          "id": "button2_link",
          "label": "Second button link"
        },
        {
          "type": "checkbox",
          "id": "button2_highlight",
          "label": "Highlight second button"
        }
      ]
    },
    {
      "type": "map",
      "name": "Map",
      "settings": [
        {
          "type": "text",
          "id": "contact_address",
          "label": "Street address",
          "info": "The full address that will be placed on the map."
        },
        {
          "type": "range",
          "id": "zoom_level",
          "label": "Map zoom level",
          "min": 1,
          "max": 20,
          "step": 1,
          "default": 12
        },
        {
          "type": "range",
          "id": "map_height",
          "min": 250,
          "max": 500,
          "step": 50,
          "unit": "px",
          "label": "Height",
          "default": 400
        },
        {
          "type": "checkbox",
          "id": "map_stretch",
          "label": "Stretch to fill page",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "map_greyscale",
          "label": "Enable greyscale map",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "map_scrolling",
          "label": "Enable scrolling",
          "default": false
        }
      ]
    },
    {
      "type": "page",
      "name": "Page",
      "settings": [
        {
          "type": "page",
          "id": "content_page",
          "label": "Content page"
        }
      ]
    },
    {
      "type": "quote",
      "name": "Quote",
      "settings": [
        {
          "type": "text",
          "id": "quote_text",
          "label": "Text",
          "default": "40% of online shoppers abandon a site that takes more than 3 seconds to load"
        },
        {
          "type": "url",
          "id": "quote_link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "rich_text_and_image",
      "name": "Rich text and image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Talk about your brand"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Text",
          "default": "<p>Use this text to share information about your brand with your customers.</p><p>Describe a product, share announcements, or welcome customers to your store.</p>"
        },
        {
          "type": "select",
          "id": "text_size",
          "label": "Text size",
          "options": [
            {
              "value": "regular_text",
              "label": "Regular"
            },
            {
              "value": "featured_text",
              "label": "Large"
            }
          ],
          "default": "featured_text"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "label": "Text alignment",
          "options": [
            {
              "value": "align_left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            }
          ],
          "default": "center"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        }
      ]
    }
  ],
  "default": {
    "settings": {
    },
    "blocks": [
      {
        "type": "rich_text_and_image",
        "settings": {
          "title": "This is an example headline",
          "content": "<p>Vestibulum fringilla pede sit amet augue. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer tincidunt. Vestibulum turpis sem, aliquet eget, lobortis pellentesque, rutrum eu, nisl. Suspendisse potenti.</p>",
          "text_alignment": "center",
          "button_label": "Button"
        }
      },
      {
        "type": "divider",
        "settings": {
          "divider_spacing": 0
        }
      },
      {
        "type": "image_gallery",
        "settings": {
        }
      },
      {
        "type": "divider",
        "settings": {
        }
      },
      {
        "type": "image_with_text_overlay",
        "settings": {
          "pretext": "<p>This is</p>",
          "title": "Your Headline",
          "subtitle": "<p>Customize this section</p>",
          "button1": "Button"
        }
      },
      {
        "type": "image_with_text",
        "settings": {
          "layout": "right",
          "title": "Headline",
          "text": "<p>Vestibulum fringilla pede sit amet augue. Pellentesque habitant morbi tristique senecrutrum eu, nisl.</p>",
          "button_label": "Button",
          "frontpage_text_align": "left"
        }
      },
      {
        "type": "image_with_text",
        "settings": {
          "layout": "left",
          "title": "Headline",
          "text": "<p>Vestibulum fringilla pede sit amet augue. Pellentesque habitant morbi tristique senecrutrum eu, nisl.</p>",
          "button_label": "Button",
          "frontpage_text_align": "left"
        }
      },
      {
        "type": "image_with_text_overlay",
        "settings": {
          "pretext": "<p>This is</p>",
          "title": "Your Headline",
          "subtitle": "<p>Customize this section</p>",
          "button1": "Button",
          "text_position": "right"
        }
      },
      {
        "type": "contact_form",
        "settings": {
        }
      }
    ]
  }
}

{% endschema %}
